import React from 'react'
import Link from 'next/link'
import { RESTAURANTS } from '@/lib/restaurant-data'

export default function LocationPerformancePage() {
  // Summary data for quick overview
  const locationSummary = [
    {
      restaurant: RESTAURANTS[0], // Chanakyapuri
      revenue: 485000,
      revenueVariance: 16.9,
      sameStoreGrowth: 9.0,
      status: 'high-performer'
    },
    {
      restaurant: RESTAURANTS[1], // Gurugram
      revenue: 395000,
      revenueVariance: -4.8,
      sameStoreGrowth: 4.5,
      status: 'average-performer'
    },
    {
      restaurant: RESTAURANTS[2], // Shahpur Jat
      revenue: 365000,
      revenueVariance: -12.0,
      sameStoreGrowth: -1.9,
      status: 'low-performer'
    }
  ]

  const getStatusColor = (status: string) => {
    switch (status) {
      case 'high-performer': return 'text-green-600'
      case 'average-performer': return 'text-yellow-600'
      case 'low-performer': return 'text-red-600'
      default: return 'text-gray-600'
    }
  }

  const getStatusBg = (status: string) => {
    switch (status) {
      case 'high-performer': return 'bg-green-50 dark:bg-green-900/20 border-green-200'
      case 'average-performer': return 'bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200'
      case 'low-performer': return 'bg-red-50 dark:bg-red-900/20 border-red-200'
      default: return 'bg-gray-50 dark:bg-gray-900/20 border-gray-200'
    }
  }

  const getStatusIcon = (status: string) => {
    switch (status) {
      case 'high-performer': return 'trophy'
      case 'average-performer': return 'scale'
      case 'low-performer': return 'refresh'
      default: return 'chart'
    }
  }

  return (
    <div className="space-y-6">
      {/* Header */}
      <div className="flex items-center justify-between">
        <div>
          <h1 className="text-xs font-bold text-black dark:text-white">
            Location Performance Variance
          </h1>
          <p className="text-xs font-normal text-gray-500 mt-1">
            Comparative analytics across Potbelly restaurant locations
          </p>
        </div>
      </div>

      {/* KPI Cards */}
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {/* CMP_001: Revenue Variance by Location */}
        <Link href="/comparative/location-performance/revenue-variance" 
              className="block p-4 bg-card rounded-lg border hover:shadow-md transition-shadow">
          <div className="flex items-center justify-between mb-3">
            <div className="flex items-center gap-2">
              <span className="text-xs font-bold text-black dark:text-white">CMP_001</span>
              <span>üìä</span>
            </div>
            <span className="text-xs font-normal text-blue-600">View Details ‚Üí</span>
          </div>
          <h2 className="text-xs font-bold text-black dark:text-white mb-2">
            Revenue Variance by Location
          </h2>
          <p className="text-xs font-normal text-gray-500 mb-3">
            Variance of each location's revenue vs. chain average. Identifies high and low performers.
          </p>
          <div className="space-y-2">
            <div className="flex justify-between text-xs">
              <span className="text-gray-500">Chain Average:</span>
              <span className="font-bold text-black dark:text-white">‚Çπ4,15,000</span>
            </div>
            <div className="flex justify-between text-xs">
              <span className="text-gray-500">Variance Spread:</span>
              <span className="font-bold text-yellow-600">28.9%</span>
            </div>
            <div className="flex justify-between text-xs">
              <span className="text-gray-500">Locations Needing Action:</span>
              <span className="font-bold text-red-600">2 of 3</span>
            </div>
          </div>
        </Link>

        {/* CMP_002: Same-Store Sales Growth Variance */}
        <Link href="/comparative/location-performance/sales-growth-variance" 
              className="block p-4 bg-card rounded-lg border hover:shadow-md transition-shadow">
          <div className="flex items-center justify-between mb-3">
            <div className="flex items-center gap-2">
              <span className="text-xs font-bold text-black dark:text-white">CMP_002</span>
              <span>üìà</span>
            </div>
            <span className="text-xs font-normal text-blue-600">View Details ‚Üí</span>
          </div>
          <h2 className="text-xs font-bold text-black dark:text-white mb-2">
            Same-Store Sales Growth Variance
          </h2>
          <p className="text-xs font-normal text-gray-500 mb-3">
            YoY growth variance across locations. Fast-growing locations offer replication playbook.
          </p>
          <div className="space-y-2">
            <div className="flex justify-between text-xs">
              <span className="text-gray-500">Chain Average Growth:</span>
              <span className="font-bold text-green-600">+3.9%</span>
            </div>
            <div className="flex justify-between text-xs">
              <span className="text-gray-500">Above Target (&gt;2%):</span>
              <span className="font-bold text-green-600">2 of 3</span>
            </div>
            <div className="flex justify-between text-xs">
              <span className="text-gray-500">Declining:</span>
              <span className="font-bold text-red-600">1 location</span>
            </div>
          </div>
        </Link>

        {/* CMP_003: Prime Cost % Ranking */}
        <Link href="/comparative/location-performance/prime-cost-ranking" 
              className="block p-4 bg-card rounded-lg border hover:shadow-md transition-shadow">
          <div className="flex items-center justify-between mb-3">
            <div className="flex items-center gap-2">
              <span className="text-xs font-bold text-black dark:text-white">CMP_003</span>
              <span>üí∞</span>
            </div>
            <span className="text-xs font-normal text-blue-600">View Details ‚Üí</span>
          </div>
          <h2 className="text-xs font-bold text-black dark:text-white mb-2">
            Prime Cost % Ranking
          </h2>
          <p className="text-xs font-normal text-gray-500 mb-3">
            Combined food + labor cost efficiency ranking. Reveals overall cost management performance.
          </p>
          <div className="space-y-2">
            <div className="flex justify-between text-xs">
              <span className="text-gray-500">Chain Average Prime Cost:</span>
              <span className="font-bold text-black dark:text-white">56.5%</span>
            </div>
            <div className="flex justify-between text-xs">
              <span className="text-gray-500">Best Performer:</span>
              <span className="font-bold text-green-600">Gurugram (54.8%)</span>
            </div>
            <div className="flex justify-between text-xs">
              <span className="text-gray-500">Cost Variance Spread:</span>
              <span className="font-bold text-yellow-600">6.2%</span>
            </div>
          </div>
        </Link>

        {/* CMP_004: Food Cost % Ranking */}
        <Link href="/comparative/location-performance/food-cost-ranking" 
              className="block p-4 bg-card rounded-lg border hover:shadow-md transition-shadow">
          <div className="flex items-center justify-between mb-3">
            <div className="flex items-center gap-2">
              <span className="text-xs font-bold text-black dark:text-white">CMP_004</span>
              <span>üçΩÔ∏è</span>
            </div>
            <span className="text-xs font-normal text-blue-600">View Details ‚Üí</span>
          </div>
          <h2 className="text-xs font-bold text-black dark:text-white mb-2">
            Food Cost % Ranking
          </h2>
          <p className="text-xs font-normal text-gray-500 mb-3">
            COGS efficiency ranking across locations. Identifies procurement and waste management differences.
          </p>
          <div className="space-y-2">
            <div className="flex justify-between text-xs">
              <span className="text-gray-500">Chain Average Food Cost:</span>
              <span className="font-bold text-black dark:text-white">31.5%</span>
            </div>
            <div className="flex justify-between text-xs">
              <span className="text-gray-500">Best Performer:</span>
              <span className="font-bold text-green-600">Gurugram (29.8%)</span>
            </div>
            <div className="flex justify-between text-xs">
              <span className="text-gray-500">Above Target (<32%):</span>
              <span className="font-bold text-green-600">3 of 3</span>
            </div>
          </div>
        </Link>

        {/* CMP_005: Labor Cost % Ranking */}
        <Link href="/comparative/location-performance/labor-cost-ranking" 
              className="block p-4 bg-card rounded-lg border hover:shadow-md transition-shadow">
          <div className="flex items-center justify-between mb-3">
            <div className="flex items-center gap-2">
              <span className="text-xs font-bold text-black dark:text-white">CMP_005</span>
              <span>üë•</span>
            </div>
            <span className="text-xs font-normal text-blue-600">View Details ‚Üí</span>
          </div>
          <h2 className="text-xs font-bold text-black dark:text-white mb-2">
            Labor Cost % Ranking
          </h2>
          <p className="text-xs font-normal text-gray-500 mb-3">
            Labor efficiency ranking by location. Reveals staffing, scheduling, and wage structure differences.
          </p>
          <div className="space-y-2">
            <div className="flex justify-between text-xs">
              <span className="text-gray-500">Chain Average Labor Cost:</span>
              <span className="font-bold text-black dark:text-white">29.3%</span>
            </div>
            <div className="flex justify-between text-xs">
              <span className="text-gray-500">Most Efficient:</span>
              <span className="font-bold text-green-600">Gurugram (28.0%)</span>
            </div>
            <div className="flex justify-between text-xs">
              <span className="text-gray-500">Variance Spread:</span>
              <span className="font-bold text-yellow-600">4.1%</span>
            </div>
          </div>
        </Link>

        {/* CMP_006: EBITDA Margin by Location */}
        <Link href="/comparative/location-performance/ebitda-margin-location" 
              className="block p-4 bg-card rounded-lg border hover:shadow-md transition-shadow">
          <div className="flex items-center justify-between mb-3">
            <div className="flex items-center gap-2">
              <span className="text-xs font-bold text-black dark:text-white">CMP_006</span>
              <span>üìä</span>
            </div>
            <span className="text-xs font-normal text-blue-600">View Details ‚Üí</span>
          </div>
          <h2 className="text-xs font-bold text-black dark:text-white mb-2">
            EBITDA Margin by Location
          </h2>
          <p className="text-xs font-normal text-gray-500 mb-3">
            Profitability ranking by location. Reveals which locations are margin-enhancing vs margin-dilutive.
          </p>
          <div className="space-y-2">
            <div className="flex justify-between text-xs">
              <span className="text-gray-500">Chain Average EBITDA:</span>
              <span className="font-bold text-black dark:text-white">27.9%</span>
            </div>
            <div className="flex justify-between text-xs">
              <span className="text-gray-500">Top Performer:</span>
              <span className="font-bold text-green-600">Gurugram (31.0%)</span>
            </div>
            <div className="flex justify-between text-xs">
              <span className="text-gray-500">Above Target (>15%):</span>
              <span className="font-bold text-green-600">3 of 3</span>
            </div>
          </div>
        </Link>

        {/* CMP_007: Profit Margin Variance */}
        <Link href="/comparative/location-performance/profit-margin-variance" 
              className="block p-4 bg-card rounded-lg border hover:shadow-md transition-shadow">
          <div className="flex items-center justify-between mb-3">
            <div className="flex items-center gap-2">
              <span className="text-xs font-bold text-black dark:text-white">CMP_007</span>
              <span>üí∞</span>
            </div>
            <span className="text-xs font-normal text-blue-600">View Details ‚Üí</span>
          </div>
          <h2 className="text-xs font-bold text-black dark:text-white mb-2">
            Profit Margin Variance
          </h2>
          <p className="text-xs font-normal text-gray-500 mb-3">
            Absolute profit comparison across locations. Shows which generate most profit vs. margin-dilutive.
          </p>
          <div className="space-y-2">
            <div className="flex justify-between text-xs">
              <span className="text-gray-500">Chain Average Margin:</span>
              <span className="font-bold text-black dark:text-white">21.8%</span>
            </div>
            <div className="flex justify-between text-xs">
              <span className="text-gray-500">Top Profit Generator:</span>
              <span className="font-bold text-green-600">Chanakyapuri (‚Çπ1.3L)</span>
            </div>
            <div className="flex justify-between text-xs">
              <span className="text-gray-500">Variance Status:</span>
              <span className="font-bold text-green-600">Within ¬±20% target</span>
            </div>
          </div>
        </Link>

        {/* CMP_008: Customer Satisfaction Spread */}
        <Link href="/comparative/location-performance/customer-satisfaction-spread" 
              className="block p-4 bg-card rounded-lg border hover:shadow-md transition-shadow">
          <div className="flex items-center justify-between mb-3">
            <div className="flex items-center gap-2">
              <span className="text-xs font-bold text-black dark:text-white">CMP_008</span>
              <span>‚≠ê</span>
            </div>
            <span className="text-xs font-normal text-blue-600">View Details ‚Üí</span>
          </div>
          <h2 className="text-xs font-bold text-black dark:text-white mb-2">
            Customer Satisfaction Spread
          </h2>
          <p className="text-xs font-normal text-gray-500 mb-3">
            Rating variance between highest and lowest-rated locations. Identifies service consistency issues.
          </p>
          <div className="space-y-2">
            <div className="flex justify-between text-xs">
              <span className="text-gray-500">Chain Average Rating:</span>
              <span className="font-bold text-black dark:text-white">4.2 ‚≠ê</span>
            </div>
            <div className="flex justify-between text-xs">
              <span className="text-gray-500">Rating Spread:</span>
              <span className="font-bold text-yellow-600">0.4 stars</span>
            </div>
            <div className="flex justify-between text-xs">
              <span className="text-gray-500">Status:</span>
              <span className="font-bold text-yellow-600">Warning (>0.3)</span>
            </div>
          </div>
        </Link>
      </div>

      {/* Quick Location Performance Summary */}
      <div className="bg-card p-4 rounded-lg border">
        <h2 className="text-xs font-bold text-black dark:text-white mb-4">
          üèÜ Quick Performance Overview
        </h2>
        <div className="space-y-3">
          {locationSummary
            .sort((a, b) => b.revenue - a.revenue)
            .map((location, index) => (
            <div key={location.restaurant.id} className={`p-3 rounded border ${getStatusBg(location.status)}`}>
              <div className="flex items-center justify-between">
                <div className="flex items-center gap-3">
                  <span className="text-xs font-bold text-gray-600">#{index + 1}</span>
                  <span className="text-xs font-bold text-black dark:text-white">
                    {location.restaurant.fullName}
                  </span>
                  <span>{getStatusIcon(location.status)}</span>
                </div>
                <div className="text-right">
                  <div className="text-xs font-bold text-black dark:text-white">
                    ‚Çπ{location.revenue.toLocaleString('en-IN')}
                  </div>
                </div>
              </div>
              <div className="grid grid-cols-2 gap-4 mt-2">
                <div className="flex justify-between text-xs">
                  <span className="text-gray-500">Revenue Variance:</span>
                  <span className={`font-bold ${location.revenueVariance > 0 ? 'text-green-600' : 'text-red-600'}`}>
                    {location.revenueVariance > 0 ? '+' : ''}{location.revenueVariance.toFixed(1)}%
                  </span>
                </div>
                <div className="flex justify-between text-xs">
                  <span className="text-gray-500">YoY Growth:</span>
                  <span className={`font-bold ${location.sameStoreGrowth > 0 ? 'text-green-600' : 'text-red-600'}`}>
                    {location.sameStoreGrowth > 0 ? '+' : ''}{location.sameStoreGrowth.toFixed(1)}%
                  </span>
                </div>
              </div>
            </div>
          ))}
        </div>
      </div>

      {/* Key Insights */}
      <div className="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200">
        <h2 className="text-xs font-bold text-blue-900 dark:text-blue-300 mb-3">
          üí° Key Insights & Actions
        </h2>
        <div className="space-y-2">
          <div className="flex items-start gap-2">
            <span className="text-xs text-blue-600">üèÜ</span>
            <p className="text-xs font-normal text-blue-800 dark:text-blue-300">
              <strong>High Performer:</strong> Chanakyapuri shows strong revenue (+16.9%) and growth (+9.0%). 
              Replicate corporate catering model and premium positioning.
            </p>
          </div>
          <div className="flex items-start gap-2">
            <span className="text-xs text-blue-600">üìà</span>
            <p className="text-xs font-normal text-blue-800 dark:text-blue-300">
              <strong>Steady Growth:</strong> Gurugram maintains consistent +4.5% growth. 
              Opportunity to boost revenue through premium menu items.
            </p>
          </div>
          <div className="flex items-start gap-2">
            <span className="text-xs text-blue-600">üö®</span>
            <p className="text-xs font-normal text-blue-800 dark:text-blue-300">
              <strong>Intervention Needed:</strong> Shahpur Jat declining (-1.9% YoY). 
              Urgent action required: weather-independent menu, indoor expansion.
            </p>
          </div>
        </div>
      </div>

      {/* Navigation Helper */}
      <div className="bg-gray-50 dark:bg-gray-900/20 p-4 rounded-lg border border-gray-200">
        <h2 className="text-xs font-bold text-black dark:text-white mb-2">
          üß≠ Related Analytics
        </h2>
        <div className="flex gap-4 text-xs">
          <Link href="/operational/customer-flow" className="text-blue-600 hover:underline">
            Customer Flow Analysis
          </Link>
          <Link href="/financial/profitability" className="text-blue-600 hover:underline">
            Profitability by Location
          </Link>
          <Link href="/comparative/best-practice-identification" className="text-blue-600 hover:underline">
            Best Practice Identification
          </Link>
        </div>
      </div>
    </div>
  )
}